stages: 
  - prune-remote
  - update-remote

workflow:
  rules:
    - if: $CI_COMMIT_TAG

image: registry.sgts.gitlab-dedicated.com/wog/gvt/wogaa/projects/cicd-images/alpine-3.19-node-20:v1.0.2

set-github-origin:
  stage: prune-remote
  before_script:
    - rm -rf .git
  script:
    - git init
    - git remote add origin ${GITHUB_URL}

update-remote:
  stage: update-remote
  needs: 
    - set-github-origin
  script:
    - sh ./update-github-remote.sh
  when: manual